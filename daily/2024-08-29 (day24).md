eclipse.ini
```ini
-startup
plugins/org.eclipse.equinox.launcher_1.6.800.v20240513-1750.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.2.1000.v20240507-1834
-product
org.eclipse.epp.package.jee.product
-showsplash
org.eclipse.epp.package.common
--launcher.defaultAction
openFile
--launcher.appendVmargs
-vm
plugins/org.eclipse.justj.openjdk.hotspot.jre.full.win32.x86_64_21.0.4.v20240802-1551/jre/bin
-vmargs
-Dorg.eclipse.ecf.provider.filetransfer.excludeContributors=org.eclipse.ecf.provider.filetransfer.httpclientjava
-Dosgi.requiredJavaVersion=21
-Dosgi.instance.area.default=@user.home/eclipse-workspace
-Dosgi.dataAreaRequiresExplicitInit=true
-Dorg.eclipse.swt.graphics.Resource.reportNonDisposed=true
-Declipse.e4.inject.javax.warning=false
-Dsun.java.command=Eclipse
-Xms256m
-Xmx2048m
-XX:+UseG1GC
-XX:+UseStringDeduplication
--add-modules=ALL-SYSTEM
-Djava.security.manager=allow
--add-opens=java.base/java.io=ALL-UNNAMED
--add-opens=java.base/sun.nio.ch=ALL-UNNAMED
--add-opens=java.base/java.net=ALL-UNNAMED
--add-opens=java.base/sun.security.ssl=ALL-UNNAMED

```

여기서 -vm 부분은 openjdk로 잡혀져 있지만
우리가 미리 설치해둔 jdk17로 돌아가게끔
%java_home%으로 동작하게끔 만들어주자

workspace 변경?

자바 공식적으로 제공하는 ide가 eclipse
취업 1년도 안되는 사람이 eclipse 쓰지마라?

처음에는 설정해서 쓰기에 편한것을 쓰는것이 좋다..

처음 차를 사면 길들이는데 시간이 걸린다..
최신형은 버그를 만날수도 있음..
2023-06 이하 +2024-06 스페어로 같이 쓴다

![[Pasted image 20240829094154.png]]
빨간색으로 표시한 곳이 perspective
상황에 따라 폴더를 보거나 web, java 파일\\*폴더 항목을 정리해서 볼 수 있다.


oracle 이 썬마이크로시스템즈(+java)를 몇 조 주고 인수 근데 netbeans는 인수안함ㅋㅋ

TC 서버(Tomcat 임)
spring boot의 Tomcat은 경량화된 TC서버
tomcat8 이후로 크게 변한건 없지만 자바 버전에 따라 지원사항이 달라지니 수업따라 java9 사용

Tomcat
![[Pasted image 20240829100830.png]]
start-up 실행하면 



꿈 사랑 지혜 동기? 제일 중요한 것은 인맥이다...

맞습니다

썬마이크로시스템즈 반대로 jdk ide eclipse는 3rd party 개발을 하는 입장으로 잘 만든것 같다
연봉차이도 음지 양지 차이겠지ㅋㅋ

![[Pasted image 20240829103316.png]]
톰캣과 jdk 설정을 해준다
톰캣 관련설정으로 preferences>server>runtime environment 에 자동으로 설정된다
자바 관련 설정은 properties>

![[Pasted image 20240829103452.png]]

src/main/java/
에 java
src/main/java/webapp/
src/main/java/webapp/WEB-INF
에 jsp 관련파일이 있다..


![[Pasted image 20240829103606.png]]
톰캣9.0은 jdk 11버전 이상을 지원한다


이전 eclipse 에서는 UTF-8 설정을 따로 해야하지만 지금쓰는 24-06버전에선 UTF-8 설정이 자동임

web.xml - url매핑 또는 filter 제공 
annotation 으로 톰캣이 제공은 해주지만 xml 방식도 있다


port를 8088로 설정하려면 server.xml 에서 Connector 부분 수정
``` xml
<!--server.xml-->
<Connector connectionTimeout="20000" maxParameterCount="1000" port="8088" protocol="HTTP/1.1" redirectPort="8443"/>
```

webkit-eclipse-workspace\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp0\\wtpwebapps\\day01

서블릿 생성
![[Pasted image 20240829114119.png]]
서블릿 생성시 URL 매핑을 시켜줄 수 있다

![[Pasted image 20240829114152.png]]
마찬가지로 HttpServlet 에서 상속받은 HTTP 메소드 관련 메소드 들을 미리 만들어 둘 수 있다


jsp 도 서블릿으로 바뀐다
이미 만들어진 index.jsp가 서블릿으로 바뀐것을 확인하려면
	\[프로젝트 폴더\]\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp0\\work\\Catalina\\localhost\\day01\\org\\apache\\jsp
에 들어가면 확인할 수 있다..


#### java 기초
#### jsp 문법
\<\% \%\>


책을 쭉 한번 읽어보고 해보는 편이 좋다..
시행착오를 최소한으로 하면서 해보는 중이니까 좀 해라..


### servlet
서블릿은 앞에서 말한대로 HttpServlet 을 상속받은 메소드들을 활용한다

아래는 Get 메소드를 
``` java
@WebServlet("/App")
public class App extends HttpServlet {
	private static final long serialVersionUID = 1L;
	
    public App() {
        super();
        // TODO Auto-generated constructor stub
    }
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		PrintWriter out = response.getWriter();
		
		// HttpServletResponse의 PrintWriter 객체를 이용해서 화면에 HTML 출력;
		out.println("!<DOCTYPE html>"
				+"<head>"
				+"<meta charset=\"UTF-8\""
				+"<title>App 서블릿 사용법 예제</title>"
				+"</head><body>");
		
		out.write("<h1>this App run on Tomcat 9.0</h1>\n");
		out.println("<p>this function printed by PrintWriter.println</p>");
		
		
		out.println("</body></html>");
		out.close();
	}
```

![[Pasted image 20240829142003.png]]


이번엔 todolist 서블릿(url은 day01/todo/list)을 만들어서 todolist.jsp로 포워딩 시키자
이때 WEB-INF>views 에 todolist.jsp를 만들자
![[Pasted image 20240829143705.png]]
밑줄에다 넣으면


![[Pasted image 20240829143435.png]]
web-inf 로는 접근이 불가능 하다

서블릿에서 전달시켜줘야 한다...


spring boot 전까지 tomcat(servlet, jsp) 익히지 못하면 너무 어렵다...



# 당일 정리본

오늘의 한일
- 수업 환경구성 : tomcat 실행 확인 및 eclipse 설치&tomcat연동
- 실습 : 저번시간 todolist 서블릿(+jsp)으로 간단 구현

## 수업 환경구성
### tomcat ?
- WAS (Web Application Server) 
- 백그라운드 실행가능(데몬 실행) : tomcat_home\\bin\\startup.bat
- Spring boot web start 에는 tomcat 경량본이 내장돼있어 처음 spring 익히는 관문

설치 주의 사항 : %java_home% 등록 / jdk 버전 호환

### eclipse
java 공식 ide
각 프로그램에 맞는 플러그인들을 지원함

우리가 사용하는 버전은 24-6 | 23-6

eclipse 설치 폴더의 eclipse.ini 부분에서 실행에 필요한 변수 설정 가능
\-vm 설정시 eclipse 실행 jre 버전 설정가능
=> eclipse 버전별로 실행을 지원하는 최소 jre 버전이 다름

jsp/html/css & java & xml 인코딩 설정

#### tomcat xml

이클립스에서 열었는 Tomcat 서버에서...
- port를 8088로 설정하려면 server.xml 에서 Connector>port 속성 부분 수정
``` xml
<!--server.xml-->
<Connector connectionTimeout="20000" maxParameterCount="1000" port="8088" protocol="HTTP/1.1" redirectPort="8443"/>
```

WEB-INF 내부에서는 외부 url로 직접접근 불가
+) 아래의 welcome-file 을 지정할 수 있음
``` xml
<!--web.xml-->
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://xmlns.jcp.org/xml/ns/javaee" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd" id="WebApp_ID" version="4.0">
  <display-name>day01</display-name>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
</web-app>
```



### 자바
TodoVo => Value Object 

public getter/setter
constructor
- default
- 인자를 받는 counstructor (+전체 인자받음)
super/this
toString()
	String.format

## 실습 : todolist forwarding

``` jsp
<%@page import="org.comstudy.myweb.model.TodoVo"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<%!
// jsp 선언문 : 멤버 필드, 멤버메서드 등
// service 함수 외부에 들어가는 내용
// 함수 내부라면
	private String name = "홍길동";
	public String sayHello() {
		return toString();
	}
// 이런식으로 멤버들을 선언 할 수 있다..
%>


<%
// service 함수 내부에 들어가는 내용
// 스크립틀릿: 이렇게 주석달린부분 처럼 java 소스코드 작성,사용 가능
// JSP 파일을 Tomcat 에서 실행 하면 Servlet JAVA 소스코드로 변경되고
// 변경된 소스코드를 컴파일 돼서 .class 파일로 만들어 진다.
// TOMCAT이 .class 파일을 브라우저에 실행 하도록 만들어 줌(HTML로 바뀜)

// src 영역에 선언된 JAVA 객체 바로 사용가능. (사용 할 클래스 import 필수)
TodoVo todo = new TodoVo(100, "집안 정리하기", false);
// jsp에는 out, request, response, session, application 등의 내장 객체가 미리 준비되어 있다..
%>
	<h1>Hello World</h1>
	<ul>
	<li><a href="App">to App</a></li>
	<li><a href="todo/list">Todolist</a></li>
	
	</ul>
	<h3><%=todo %></h3>
	
	<table>
	</table>
	
</body>
</html>
```

``` java
import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet("/App") // annotaion 으로 url 패턴 지정가능
public class App extends HttpServlet { // HttpServlet 상속

  // 상속받은 doGet/doPost 등의 메소드를 이용해 HTTP 메소드 타입별로 처리
  protected void doGet(HttpServletRequest req, HttpServletResponse res) 
  throws ServletException, IOException {
    // ...

	// meta태그 같이 HTTP 헤더와 관련된 내용은 따로 구성해 전달한다..
    response.setContentType("text/html");
    response.setCharacterEncoding("UTF-8");

	PrintWriter out = response.getWriter();
	// PrintWriter 를 통해 html stream 을 만든다
	// HTTP Get 메소드의 응답으로 res 에 html을 담아 전달한다..
    out.println("<head>"
      +"<title>App 서블릿 사용법 예제</title>"
      +"</head><body>");

	out.write("<h1>this App run on Tomcat 9.0</h1>\n");
    // ...
    
    out.println("</body></html>");
    out.close();
  }
```

중요내용 요약 : jsp 파일은 servlet으로 변환된다

+) context 와 내장객체
+) eclipse에서 확인해보고 싶다면
```
eclipse-workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\work\Catalina\localhost\day01\org\apache\jsp
```
이클립스 workspace 메타데이터를 확인하면 될 것 같다.

#### JSP 문법 정리
@page
- <%@page import=[자바 패키지.[클래스|*]] %>
- <%@page [html 메타태그와 관련된 속성들] %>

서블릿 위치별 태그 
(jsp 가 servlet으로 변환될때 태그안의 내용이 기록됨)
<%! %> : jsp 변환 서블릿 상단에 출력 (service 함수 바깥)
<% %> :  \_jspService 함수 내부 출력
<%= %> : print로 출력